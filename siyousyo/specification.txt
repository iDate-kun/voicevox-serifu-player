## アプリケーション仕様書: Voicevoxセリフプレイヤー

### 1. 概要

本アプリケーションは、VOICEVOX Engineと連携し、複数のキャラクターやスタイル（話者）に同じセリフを喋らせ、それを一つの音声ファイルとして生成・再生することで、声の比較・試聴を効率的に行うことを目的としたデスクトップアプリケーションです。

### 2. 機能一覧

#### 2.1. 音声生成

*   **テキスト入力**: ユーザーは任意のテキスト（セリフ）を入力できます。
*   **話者選択**:
    *   **ノーマルモード**: 各キャラクターの「ノーマル」スタイルを一覧から複数選択できます。
    *   **スタイル選択モード**: 各キャラクターが持つすべてのスタイル（例：「あまあま」「ツンツン」など）を階層的に表示し、個別に複数選択できます。
*   **音声生成実行**: 選択したすべての話者について、入力されたセリフの音声を生成し、指定した間隔の無音を挟んで一つのMP3ファイルに結合します。
*   **話者名の読み上げ**:
    *   ONにすると、各話者のセリフの前に話者名を読み上げる音声が挿入されます。
    *   **ノーマルモード時**: 「（キャラクター名）」を読み上げます。（例：「ずんだもん（1秒）こんにちは」）
    *   **スタイル選択モード時**: 「（キャラクター名）（スタイル名）」を読み上げます。（例：「ずんだもん あまあま（1秒）こんにちは」）
*   **音声間の間隔設定**: 0秒から5秒の間で、各話者のセリフ間の無音時間をスライダーで調整できます。

#### 2.2. ユーザーインターフェース (UI)

*   **キャラクターリスト**:
    *   VOICEVOX Engineから取得した話者を一覧表示します。
    *   各キャラクターにはテーマカラーが設定されており、リストの背景色に反映されます。
        *   **選択前**: テーマカラーが半透明（60%）で表示されます。
        *   **選択後**: テーマカラーが不透明（100%）になり、枠線が付与され、視覚的に区別しやすくなります。
    *   背景色に応じて、文字色が黒か白に自動で調整され、常に可読性を保ちます。
    *   リスト項目全体がクリック可能領域となっており、操作性に優れます。
*   **フィルタリング機能**:
    *   **性別**: 「すべて」「女性」「男性」「その他」で表示するキャラクターを絞り込めます。
    *   **グループ**:
        *   「東北プロジェクトのみ」: 東北応援キャラクター（四国めたん、ずんだもん等）のみを表示します。
        *   「選択済みのみ」: 現在選択されているキャラクター/スタイルのみを表示します。
*   **一括選択機能**:
    *   **すべて選択**: 現在フィルターで表示されているすべてのキャラクター/スタイルを一括で選択します。
    *   **すべて解除**: すべての選択を解除します。
    *   **キャラごと一括選択**: スタイル選択モード時、キャラクター名の横のチェックボックスで、そのキャラクターの全スタイルを一括で選択・解除できます。
*   **進捗表示**:
    *   音声生成中は、プログレスバーとパーセンテージで進捗状況をリアルタイムに表示します。
    *   ステータスメッセージも「〇〇（キャラ名）の△△（スタイル名）を生成中...」のように詳細に更新されます。
*   **再生機能**:
    *   生成された音声ファイルを再生するための音声プレイヤーが表示されます。
    *   「自動再生」をONにすると、音声生成完了後に自動で再生が開始されます。

### 3. 技術仕様

*   **フレームワーク**: Electron, React
*   **主要ライブラリ**:
    *   `fluent-ffmpeg`: 音声ファイルの結合・変換
    *   `axios`: VOICEVOX Engine APIとの通信
*   **連携API**: VOICEVOX Engine API (http://localhost:50021)

### 4. データ構造

*   **キャラクター情報**: アプリケーション起動時にVOICEVOX Engineから取得し、内部でキャラクターごとの階層構造（キャラクター > スタイル）として管理します。
*   **キャラクターメタデータ**: アプリケーション内に定義された`characterMeta`オブジェクトにより、各キャラクターの「性別」「テーマカラー」「東北プロジェクトか否か」といった付加情報を管理します。
